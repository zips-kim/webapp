<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì…ì†Œ ì •ë³´ í™•ì¸ - ìœ ì„±ì‰˜í„°</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>.container { margin-top: 0 !important; max-width: 450px; }</style>
</head>
<body class="flex-center-body" style="padding: 15px;">
    <div class="container">
        <div class="user-card">
            <div style="font-size: 40px; margin-bottom: 10px;">âœ…</div>
            <h2 class="mb-5" style="color: #2c3e50;">ì…ì†Œ ë“±ë¡ ì™„ë£Œ</h2>
            
            <div id="user_qrcode" class="qr-container"></div>
            <p style="font-size: 0.85rem; color: #718096;">
                QR ì½”ë“œë¥¼ ê·¼ë¬´ìì—ê²Œ ë³´ì—¬ì£¼ì‹œê³  ì„±í•¨ì„ ë§ì”€í•˜ì‹œë©´<br>ë¹ ë¥¸ ë¬¼í’ˆ ìˆ˜ë ¹ ë° í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
            </p>
            
            <div class="info-detail-box">
                <div style="margin-bottom: 15px; border-bottom: 1px solid #edf2f7; padding-bottom: 10px;">
                    <span class="info-label">êµ¬í˜¸ì†Œ</span>
                    <div class="info-value">ğŸ›ï¸ {{ resident.shelter_name }}</div>
                </div>

                <div>
                    <span class="info-label">êµ¬í˜¸ì†Œ ìœ„ì¹˜</span>
                    <div style="font-size: 0.95rem; color: #4a5568;">ğŸ“ {{ resident.address }}</div>
                </div>
            </div>

            <button onclick="location.reload()" class="btn-base w-100" style="background:#f1f3f5; color:#495057;">í™”ë©´ ìƒˆë¡œê³ ì¹¨</button>
        </div>
        
        <div class="text-center" style="margin-top: 25px;">
            <p style="font-size: 0.8rem; color: #a0aec0;">ìœ ì„±êµ¬ ì¬ë‚œì•ˆì „ëŒ€ì±…ë³¸ë¶€</p>
        </div>
    </div>

    <script>
        window.onload = function() {
			const residentId = "{{ resident.id }}";
			const baseUrl = window.location.origin;
			const adminManageUrl = baseUrl + "/resident_manage/" + residentId;
			
			new QRCode(document.getElementById("user_qrcode"), {
				text: adminManageUrl,
				width: 160, height: 160,
				colorDark : "#2d3748", colorLight : "#ffffff",
				correctLevel : QRCode.CorrectLevel.H
			});
		};
    </script>
</body>
</html>